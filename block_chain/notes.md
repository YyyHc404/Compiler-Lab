特点
- 分布式数据库
- 点对点
解决:
- 共识
- 认证
- 不可篡改

当修改一个块交易或哈希值时:
区块哈希失效：重新哈希会得出错误的值 
重建并重新散列每个块：每个区块包含前一块的哈希值进行哈希计算，修改区块会导致后面的区块hash值不正确
这两条保证了修改数据会得到不同的链
现在就要确保这个重构时困难的
## 切片
分片（Sharding）是一种用于提高网络扩展性和性能的技术。通过将区块链网络划分为多个较小的分片，每个分片能够独立处理交易和智能合约，从而提升整个网络的吞吐量和效率。以下是区块链实现分片的主要方式和步骤：
分片的基本原理
分片在区块链中的主要目标是将交易处理负载分散到多个分片中，以避免单个节点处理整个网络的所有交易。这种方法通过并行处理交易和智能合约，显著提高了网络的扩展性。

## 区块链发布补丁:
- 当区块链发布补丁，如果数据结构改变会产生硬分叉
    - 区块头变化: 改变区块头中的版本号字段。或改变叔块的规则
    - 交易格式变化: 添加新的功能
    - 区块大小限制
    - 共识算法的变化

## 隔离见证(Segregated Witness):
- 于2017年8月通过软分叉的方式激活
- 交易的哈希可以交易被确认之前被第三方修改
- SegWit通过将签名数据（也称为见证数据）从交易的主体中分离出来，从而解决了这个问题。
- 这意味着即使签名数据被修改，交易的哈希值也不会改变，从而解决了交易延展性问题。

## 比特币改进提案（Bitcoin Improvement Proposal，BIP）
- 包括BIP141、BIP142和BIP143等
- SegWit的激活采用了一种称为“BIP9版本位激活”的软分叉机制，这需要矿工通过在区块中设置特定位来表示他们支持该提案。一旦支持率达到规定的阈值（95%的最近2016个区块），SegWit就会被锁定，并在接下来的一个难度调整周期内激活。
- 版本字段
    - 在BIP9之前，比特币区块头的版本字段是一个简单的整数值，表示协议版本。BIP9将版本字段划分为多个独立的位，每个位可以独立用于信号支持不同的功能或升级。这些版本位可以由矿工设置，以表示他们支持某个特定的提案。
- 为了提高交易延展性
- 比特币采用椭圆曲线签名算法（ ECDSA ），如果攻击者去修改了数字签名中的特定的一点数据，那么这个签名依然有效，也就是验证依然是可以通过的。但是由于签名是交易的一部分，那么签名变了，交易也就变了，所以经过哈希运算获得的 TxID 也就变了。

**ECDSA的工作原理**：
- 密钥生成
    - 私钥 (d)：一个随机数，范围在 [1,𝑛−1] 之间，其中 𝑛 是椭圆曲线的阶。
    - 公钥 (Q)：通过椭圆曲线点乘公式 𝑄=𝑑⋅𝐺 计算得到，其中 𝐺 是椭圆曲线上的基点。
- 签名生成
    -   选择一个随机数 k，范围在 [1,𝑛−1]之间
- 签名验证
- 

## 用于硬件加速计算的技术:
#### FPGA（现场可编程门阵列）:
- 可编程性：FPGA 是一种可编程芯片
- 并行处理能力：FPGA 能够执行高度并行的任务，适合处理复杂的计算。
#### ASIC（Application-Specific Integrated Circuit）:
- 专用性：ASIC 是为特定应用或任务专门设计和制造的集成电路。它们的设计是固定的
- 通常比 FPGA 更高效。
## 加密函数:
- 密钥派生函数（Key Derivation Function，KDF）
    - 用于从一个相对较短的输入值（如密码或主密钥）生成一个或多个密钥
- PBKDF2（Password-Based Key Derivation Function 2）：
    - 通过反复应用一个伪随机函数（如HMAC-SHA256），结合盐值（salt）和多次迭代来生成派生密钥。
- bcrypt（Blowfish-based crypt）:
    - 基于Blowfish加密算法的变体，包含了可配置的成本因子，使其计算过程更加耗时，从而提高抵抗暴力破解的能力。
    - Blowfish是一种对称密钥加密算法
        - 可变密钥长度：支持从32位到448位的变长密钥
        - 前几位为随机的初始向量 
- 密码分组链接（Cipher Block Chaining，CBC）。在CBC模式下，明文被分成固定大小的块，然后每个块都与前一个块的密文进行异或运算，然后再进行加密。

- scrypt
    - 设计用于消耗大量的内存和计算资源，，从而对抗硬件加速的暴力破解攻击。
**盐值**：
- 它在密码哈希或密钥派生过程中与用户输入的密码结合使用，以生成最终的哈希值或密钥。其主要作用是防止攻击者通过预先计算好的彩虹表（rainbow table）来快速破解密码。
- 盐值是随机生成的，每次使用时都会生成不同的盐值。长度最好为 8-16 个字节

- 彩虹表:
    - 彩虹表是一种预先计算好的密码哈希值表，用于快速破解密码



----
# 相关文档:
- 手写区块链：https://github.com/liuchengxu/blockchain-tutorial/tree/master


